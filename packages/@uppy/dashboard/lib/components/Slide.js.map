{"version":3,"sources":["Slide.js"],"names":["cloneElement","Component","toChildArray","require","classNames","transitionName","duration","Slide","constructor","props","state","cachedChildren","className","componentWillUpdate","nextProps","child","children","patch","cancelAnimationFrame","animationFrame","clearTimeout","leaveTimeout","undefined","requestAnimationFrame","setState","enterTimeout","setTimeout","render","module","exports"],"mappings":"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","sourcesContent":["const { cloneElement, Component, toChildArray } = require('preact')\r\nconst classNames = require('classnames')\r\n\r\nconst transitionName = 'uppy-transition-slideDownUp'\r\nconst duration = 250\r\n\r\n/**\r\n * Vertical slide transition.\r\n *\r\n * This can take a _single_ child component, which _must_ accept a `className` prop.\r\n *\r\n * Currently this is specific to the `uppy-transition-slideDownUp` transition,\r\n * but it should be simple to extend this for any type of single-element\r\n * transition by setting the CSS name and duration as props.\r\n */\r\nclass Slide extends Component {\r\n  constructor (props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      cachedChildren: null,\r\n      className: '',\r\n    }\r\n  }\r\n\r\n  // TODO: refactor to stable lifecycle method\r\n  // eslint-disable-next-line\r\n  componentWillUpdate (nextProps) {\r\n    const { cachedChildren } = this.state\r\n    const child = toChildArray(nextProps.children)[0]\r\n\r\n    if (cachedChildren === child) return null\r\n\r\n    const patch = {\r\n      cachedChildren: child,\r\n    }\r\n\r\n    // Enter transition\r\n    if (child && !cachedChildren) {\r\n      patch.className = `${transitionName}-enter`\r\n\r\n      cancelAnimationFrame(this.animationFrame)\r\n      clearTimeout(this.leaveTimeout)\r\n      this.leaveTimeout = undefined\r\n\r\n      this.animationFrame = requestAnimationFrame(() => {\r\n        // Force it to render before we add the active class\r\n        // this.base.getBoundingClientRect()\r\n\r\n        this.setState({\r\n          className: `${transitionName}-enter ${transitionName}-enter-active`,\r\n        })\r\n\r\n        this.enterTimeout = setTimeout(() => {\r\n          this.setState({ className: '' })\r\n        }, duration)\r\n      })\r\n    }\r\n\r\n    // Leave transition\r\n    if (cachedChildren && !child && this.leaveTimeout === undefined) {\r\n      patch.cachedChildren = cachedChildren\r\n      patch.className = `${transitionName}-leave`\r\n\r\n      cancelAnimationFrame(this.animationFrame)\r\n      clearTimeout(this.enterTimeout)\r\n      this.enterTimeout = undefined\r\n      this.animationFrame = requestAnimationFrame(() => {\r\n        this.setState({\r\n          className: `${transitionName}-leave ${transitionName}-leave-active`,\r\n        })\r\n\r\n        this.leaveTimeout = setTimeout(() => {\r\n          this.setState({\r\n            cachedChildren: null,\r\n            className: '',\r\n          })\r\n        }, duration)\r\n      })\r\n    }\r\n\r\n    // eslint-disable-next-line\r\n    this.setState(patch)\r\n  }\r\n\r\n  render () {\r\n    const { cachedChildren, className } = this.state\r\n\r\n    if (!cachedChildren) {\r\n      return null\r\n    }\r\n\r\n    return cloneElement(cachedChildren, {\r\n      className: classNames(className, cachedChildren.props.className),\r\n    })\r\n  }\r\n}\r\n\r\nmodule.exports = Slide\r\n"]}