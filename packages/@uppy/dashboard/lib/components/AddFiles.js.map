{"version":3,"sources":["AddFiles.js"],"names":["h","Component","require","Symbol","for","AddFiles","triggerFileInputClick","fileInput","click","triggerFolderInputClick","folderInput","onFileInputChange","event","props","handleInputChange","target","value","renderHiddenInput","isFolder","refCallback","maxNumberOfFiles","allowedFileTypes","renderMyDeviceAcquirer","i18n","renderBrowseButton","text","onClickFn","numberOfAcquirers","acquirers","length","renderDropPasteBrowseTagline","browseFiles","browseFolders","lowerFMSelectionType","fileManagerSelectionType","camelFMSelectionType","charAt","toUpperCase","slice","disableLocalFiles","i18nArray","browse","renderAcquirer","acquirer","id","activePickerPanel","showPanel","icon","name","renderAcquirers","acquirersWithoutLastTwo","lastTwoAcquirers","splice","map","renderPoweredByUppy","uppyBranding","linkText","uppy","render","ref","note","proudlyDisplayPoweredByUppy","module","exports"],"mappings":"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","sourcesContent":["const { h, Component } = require('preact')\r\n\r\nclass AddFiles extends Component {\r\n  triggerFileInputClick = () => {\r\n    this.fileInput.click()\r\n  }\r\n\r\n  triggerFolderInputClick = () => {\r\n    this.folderInput.click()\r\n  }\r\n\r\n  onFileInputChange = (event) => {\r\n    this.props.handleInputChange(event)\r\n\r\n    // We clear the input after a file is selected, because otherwise\r\n    // change event is not fired in Chrome and Safari when a file\r\n    // with the same name is selected.\r\n    // ___Why not use value=\"\" on <input/> instead?\r\n    //    Because if we use that method of clearing the input,\r\n    //    Chrome will not trigger change if we drop the same file twice (Issue #768).\r\n    event.target.value = null\r\n  }\r\n\r\n  renderHiddenInput = (isFolder, refCallback) => {\r\n    return (\r\n      <input\r\n        className=\"uppy-Dashboard-input\"\r\n        hidden\r\n        aria-hidden=\"true\"\r\n        tabIndex={-1}\r\n        webkitdirectory={isFolder}\r\n        type=\"file\"\r\n        name=\"files[]\"\r\n        multiple={this.props.maxNumberOfFiles !== 1}\r\n        onChange={this.onFileInputChange}\r\n        accept={this.props.allowedFileTypes}\r\n        ref={refCallback}\r\n      />\r\n    )\r\n  }\r\n\r\n  renderMyDeviceAcquirer = () => {\r\n    return (\r\n      <div\r\n        className=\"uppy-DashboardTab\"\r\n        role=\"presentation\"\r\n        data-uppy-acquirer-id=\"MyDevice\"\r\n      >\r\n        <button\r\n          type=\"button\"\r\n          className=\"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn\"\r\n          role=\"tab\"\r\n          tabIndex={0}\r\n          data-uppy-super-focusable\r\n          onClick={this.triggerFileInputClick}\r\n        >\r\n          <svg aria-hidden=\"true\" focusable=\"false\" width=\"32\" height=\"32\" viewBox=\"0 0 32 32\">\r\n            <g fill=\"none\" fillRule=\"evenodd\">\r\n              <rect className=\"uppy-ProviderIconBg\" width=\"32\" height=\"32\" rx=\"16\" fill=\"#2275D7\" />\r\n              <path d=\"M21.973 21.152H9.863l-1.108-5.087h14.464l-1.246 5.087zM9.935 11.37h3.958l.886 1.444a.673.673 0 0 0 .585.316h6.506v1.37H9.935v-3.13zm14.898 3.44a.793.793 0 0 0-.616-.31h-.978v-2.126c0-.379-.275-.613-.653-.613H15.75l-.886-1.445a.673.673 0 0 0-.585-.316H9.232c-.378 0-.667.209-.667.587V14.5h-.782a.793.793 0 0 0-.61.303.795.795 0 0 0-.155.663l1.45 6.633c.078.36.396.618.764.618h13.354c.36 0 .674-.246.76-.595l1.631-6.636a.795.795 0 0 0-.144-.675z\" fill=\"#FFF\" />\r\n            </g>\r\n          </svg>\r\n          <div className=\"uppy-DashboardTab-name\">{this.props.i18n('myDevice')}</div>\r\n        </button>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  renderBrowseButton = (text, onClickFn) => {\r\n    const numberOfAcquirers = this.props.acquirers.length\r\n    return (\r\n      <button\r\n        type=\"button\"\r\n        className=\"uppy-u-reset uppy-Dashboard-browse\"\r\n        onClick={onClickFn}\r\n        data-uppy-super-focusable={numberOfAcquirers === 0}\r\n      >\r\n        {text}\r\n      </button>\r\n    )\r\n  }\r\n\r\n  renderDropPasteBrowseTagline = () => {\r\n    const numberOfAcquirers = this.props.acquirers.length\r\n    const browseFiles = this.renderBrowseButton(this.props.i18n('browseFiles'), this.triggerFileInputClick)\r\n    const browseFolders = this.renderBrowseButton(this.props.i18n('browseFolders'), this.triggerFolderInputClick)\r\n\r\n    // in order to keep the i18n CamelCase and options lower (as are defaults) we will want to transform a lower\r\n    // to Camel\r\n    const lowerFMSelectionType = this.props.fileManagerSelectionType\r\n    const camelFMSelectionType = lowerFMSelectionType.charAt(0).toUpperCase() + lowerFMSelectionType.slice(1)\r\n\r\n    return (\r\n      <div class=\"uppy-Dashboard-AddFiles-title\">\r\n        {\r\n          // eslint-disable-next-line no-nested-ternary\r\n          this.props.disableLocalFiles ? this.props.i18n('importFiles')\r\n            : numberOfAcquirers > 0\r\n              ? this.props.i18nArray(`dropPasteImport${camelFMSelectionType}`, { browseFiles, browseFolders, browse: browseFiles })\r\n              : this.props.i18nArray(`dropPaste${camelFMSelectionType}`, { browseFiles, browseFolders, browse: browseFiles })\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n\r\n  [Symbol.for('uppy test: disable unused locale key warning')] () {\r\n    // Those are actually used in `renderDropPasteBrowseTagline` method.\r\n    this.props.i18nArray('dropPasteBoth')\r\n    this.props.i18nArray('dropPasteFiles')\r\n    this.props.i18nArray('dropPasteFolders')\r\n    this.props.i18nArray('dropPasteImportBoth')\r\n    this.props.i18nArray('dropPasteImportFiles')\r\n    this.props.i18nArray('dropPasteImportFolders')\r\n  }\r\n\r\n  renderAcquirer = (acquirer) => {\r\n    return (\r\n      <div\r\n        className=\"uppy-DashboardTab\"\r\n        role=\"presentation\"\r\n        data-uppy-acquirer-id={acquirer.id}\r\n      >\r\n        <button\r\n          type=\"button\"\r\n          className=\"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn\"\r\n          role=\"tab\"\r\n          tabIndex={0}\r\n          data-cy={acquirer.id}\r\n          aria-controls={`uppy-DashboardContent-panel--${acquirer.id}`}\r\n          aria-selected={this.props.activePickerPanel.id === acquirer.id}\r\n          data-uppy-super-focusable\r\n          onClick={() => this.props.showPanel(acquirer.id)}\r\n        >\r\n          {acquirer.icon()}\r\n          <div className=\"uppy-DashboardTab-name\">{acquirer.name}</div>\r\n        </button>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  renderAcquirers = (acquirers, disableLocalFiles) => {\r\n    // Group last two buttons, so we donâ€™t end up with\r\n    // just one button on a new line\r\n    const acquirersWithoutLastTwo = [...acquirers]\r\n    const lastTwoAcquirers = acquirersWithoutLastTwo.splice(acquirers.length - 2, acquirers.length)\r\n\r\n    return (\r\n      <div className=\"uppy-Dashboard-AddFiles-list\" role=\"tablist\">\r\n        {!disableLocalFiles && this.renderMyDeviceAcquirer()}\r\n        {acquirersWithoutLastTwo.map((acquirer) => this.renderAcquirer(acquirer))}\r\n        <span role=\"presentation\" style={{ 'white-space': 'nowrap' }}>\r\n          {lastTwoAcquirers.map((acquirer) => this.renderAcquirer(acquirer))}\r\n        </span>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  renderPoweredByUppy () {\r\n    const { i18nArray } = this.props\r\n\r\n    const uppyBranding = (\r\n      <span>\r\n        <svg aria-hidden=\"true\" focusable=\"false\" className=\"uppy-c-icon uppy-Dashboard-poweredByIcon\" width=\"11\" height=\"11\" viewBox=\"0 0 11 11\">\r\n          <path d=\"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z\" fillRule=\"evenodd\" />\r\n        </svg>\r\n        <span className=\"uppy-Dashboard-poweredByUppy\">Uppy</span>\r\n      </span>\r\n    )\r\n\r\n    const linkText = i18nArray('poweredBy', { uppy: uppyBranding })\r\n\r\n    return (\r\n      <a\r\n        tabIndex=\"-1\"\r\n        href=\"https://uppy.io\"\r\n        rel=\"noreferrer noopener\"\r\n        target=\"_blank\"\r\n        className=\"uppy-Dashboard-poweredBy\"\r\n      >\r\n        {linkText}\r\n      </a>\r\n    )\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className=\"uppy-Dashboard-AddFiles\">\r\n        {this.renderHiddenInput(false, (ref) => { this.fileInput = ref })}\r\n        {this.renderHiddenInput(true, (ref) => { this.folderInput = ref })}\r\n        {this.renderDropPasteBrowseTagline()}\r\n        {this.props.acquirers.length > 0 && this.renderAcquirers(this.props.acquirers, this.props.disableLocalFiles)}\r\n        <div className=\"uppy-Dashboard-AddFiles-info\">\r\n          {this.props.note && <div className=\"uppy-Dashboard-note\">{this.props.note}</div>}\r\n          {this.props.proudlyDisplayPoweredByUppy && this.renderPoweredByUppy(this.props)}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nmodule.exports = AddFiles\r\n"]}