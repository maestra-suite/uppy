{"version":3,"names":["h","Component","classNames","shallowEqual","FilePreviewAndLink","FileProgress","FileInfo","Buttons","FileItem","constructor","props","setSpeakers","event","setState","speakers","target","value","file","id","uppy","setFileMeta","speakerCount","state","componentDidMount","preview","handleRequestThumbnail","shouldComponentUpdate","nextProps","componentDidUpdate","componentWillUnmount","handleCancelThumbnail","render","isProcessing","progress","preprocess","postprocess","isUploaded","uploadComplete","error","uploadInProgressOrComplete","uploadStarted","uploadInProgress","isGhost","showRemoveButton","individualCancellation","showRemoveButtonAfterComplete","dashboardItemClass","recoveredState","resumableUploads","className","role","showLinkToFileUploadResult","i18n","toggleFileCard","metaFields","hideRetryButton","hideCancelButton","hidePauseResumeButton","acquirers","containerWidth","containerHeight","toggleAddFilesPanel","isSingleFile","canEditFile","openFileEditor","class","onChange"],"sources":["index.jsx"],"sourcesContent":["import {  h, Component  } from 'preact'\nimport classNames from 'classnames'\nimport shallowEqual from 'is-shallow-equal'\nimport FilePreviewAndLink from './FilePreviewAndLink/index.jsx'\nimport FileProgress from './FileProgress/index.jsx'\nimport FileInfo from './FileInfo/index.jsx'\nimport Buttons from './Buttons/index.jsx'\n\nexport default class FileItem extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      speakers: 1\n    }\n  }\n  \n  componentDidMount () {\n    const { file } = this.props\n    if (!file.preview) {\n      this.props.handleRequestThumbnail(file)\n    }\n  }\n\n  shouldComponentUpdate (nextProps) {\n    return !shallowEqual(this.props, nextProps)\n  }\n\n  // VirtualList mounts FileItems again and they emit `thumbnail:request`\n  // Otherwise thumbnails are broken or missing after Golden Retriever restores files\n  componentDidUpdate () {\n    const { file } = this.props\n    if (!file.preview) {\n      this.props.handleRequestThumbnail(file)\n    }\n  }\n\n  componentWillUnmount () {\n    const { file } = this.props\n    if (!file.preview) {\n      this.props.handleCancelThumbnail(file)\n    }\n  }\n\n  setSpeakers = (event) => {\n    this.setState({\n      speakers: event.target.value\n    });\n    var file = this.props.file;\n    if (file && file.id) {\n      this.props.uppy.setFileMeta(file.id, {\n        speakerCount: event.target.value\n      });\n    }\n  }\n\n  render () {\n    const { file } = this.props\n\n    const isProcessing = file.progress.preprocess || file.progress.postprocess\n    const isUploaded = file.progress.uploadComplete && !isProcessing && !file.error\n    const uploadInProgressOrComplete = file.progress.uploadStarted || isProcessing\n    const uploadInProgress = (file.progress.uploadStarted && !file.progress.uploadComplete) || isProcessing\n    const error = file.error || false\n\n    // File that Golden Retriever was able to partly restore (only meta, not blob),\n    // users still need to re-add it, so itâ€™s a ghost\n    const { isGhost } = file\n\n    let showRemoveButton = this.props.individualCancellation\n      ? !isUploaded\n      : !uploadInProgress && !isUploaded\n\n    if (isUploaded && this.props.showRemoveButtonAfterComplete) {\n      showRemoveButton = true\n    }\n\n    const dashboardItemClass = classNames({\n      'uppy-Dashboard-Item': true,\n      'is-inprogress': uploadInProgress && !this.props.recoveredState,\n      'is-processing': isProcessing,\n      'is-complete': isUploaded,\n      'is-error': !!error,\n      'is-resumable': this.props.resumableUploads,\n      'is-noIndividualCancellation': !this.props.individualCancellation,\n      'is-ghost': isGhost,\n    })\n\n    return (\n      <div\n        className={dashboardItemClass}\n        id={`uppy_${file.id}`}\n        role={this.props.role}\n      >\n        <div className=\"uppy-Dashboard-Item-preview\">\n          <FilePreviewAndLink\n            file={file}\n            showLinkToFileUploadResult={this.props.showLinkToFileUploadResult}\n            i18n={this.props.i18n}\n            toggleFileCard={this.props.toggleFileCard}\n            metaFields={this.props.metaFields}\n          />\n          <FileProgress\n            uppy={this.props.uppy}\n            file={file}\n            error={error}\n            isUploaded={isUploaded}\n            hideRetryButton={this.props.hideRetryButton}\n            hideCancelButton={this.props.hideCancelButton}\n            hidePauseResumeButton={this.props.hidePauseResumeButton}\n            recoveredState={this.props.recoveredState}\n            showRemoveButtonAfterComplete={this.props.showRemoveButtonAfterComplete}\n            resumableUploads={this.props.resumableUploads}\n            individualCancellation={this.props.individualCancellation}\n            i18n={this.props.i18n}\n          />\n        </div>\n\n        <div className=\"uppy-Dashboard-Item-fileInfoAndButtons\">\n          <FileInfo\n            file={file}\n            id={this.props.id}\n            acquirers={this.props.acquirers}\n            containerWidth={this.props.containerWidth}\n            containerHeight={this.props.containerHeight}\n            i18n={this.props.i18n}\n            toggleAddFilesPanel={this.props.toggleAddFilesPanel}\n            toggleFileCard={this.props.toggleFileCard}\n            metaFields={this.props.metaFields}\n            isSingleFile={this.props.isSingleFile}\n          />\n          <Buttons\n            file={file}\n            metaFields={this.props.metaFields}\n            showLinkToFileUploadResult={this.props.showLinkToFileUploadResult}\n            showRemoveButton={showRemoveButton}\n            canEditFile={this.props.canEditFile}\n            uploadInProgressOrComplete={uploadInProgressOrComplete}\n            toggleFileCard={this.props.toggleFileCard}\n            openFileEditor={this.props.openFileEditor}\n            uppy={this.props.uppy}\n            i18n={this.props.i18n}\n          />\n          <div class=\"uppy-DropDown-SpeakerCount\">\n            <select class=\"uppy-Dropdown-SpeakerCount-Select\" value={this.state.speakers} onChange={this.setSpeakers}>\n              <option value=\"1\">1</option>\n              <option value=\"2\">2</option>\n              <option value=\"3\">3</option>\n              <option value=\"4\">4</option>\n              <option value=\"5\">5</option>\n              <option value=\"6\">6</option>\n              <option value=\"7\">7</option>\n              <option value=\"8\">8</option>\n              <option value=\"9\">9</option>\n            </select>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n"],"mappings":"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"}