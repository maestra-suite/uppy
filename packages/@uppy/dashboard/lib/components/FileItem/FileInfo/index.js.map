{"version":3,"sources":["index.js"],"names":["h","Fragment","require","prettierBytes","truncateString","MetaErrorMessage","renderFileName","props","author","name","file","meta","getMaxNameLength","containerWidth","renderAuthor","providerName","remote","dot","url","renderFileSize","size","ReSelectButton","isGhost","toggleAddFilesPanel","i18n","ErrorButton","onClick","error","module","exports","FileInfo","source","alert","toggleFileCard","metaFields"],"mappings":"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","sourcesContent":["const { h, Fragment } = require('preact')\r\nconst prettierBytes = require('@transloadit/prettier-bytes')\r\nconst truncateString = require('@uppy/utils/lib/truncateString')\r\nconst MetaErrorMessage = require('../MetaErrorMessage')\r\n\r\nconst renderFileName = (props) => {\r\n  const { author, name } = props.file.meta\r\n\r\n  function getMaxNameLength () {\r\n    if (props.containerWidth <= 352) {\r\n      return 35\r\n    }\r\n    if (props.containerWidth <= 576) {\r\n      return 60\r\n    }\r\n    // When `author` is present, we want to make sure\r\n    // the file name fits on one line so we can place\r\n    // the author on the second line.\r\n    return author ? 20 : 30\r\n  }\r\n\r\n  return (\r\n    <div className=\"uppy-Dashboard-Item-name\" title={name}>\r\n      {truncateString(name, getMaxNameLength())}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst renderAuthor = (props) => {\r\n  const { author } = props.file.meta\r\n  const { providerName } = props.file.remote\r\n  const dot = `\\u00B7`\r\n\r\n  if (!author) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className=\"uppy-Dashboard-Item-author\">\r\n      <a\r\n        href={`${author.url}?utm_source=Companion&utm_medium=referral`}\r\n        target=\"_blank\"\r\n        rel=\"noopener noreferrer\"\r\n      >\r\n        {truncateString(author.name, 13)}\r\n      </a>\r\n      {providerName ? (\r\n        <Fragment>\r\n          {` ${dot} `}\r\n          {providerName}\r\n          {` ${dot} `}\r\n        </Fragment>\r\n      ) : null}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst renderFileSize = (props) => props.file.size && (\r\n  <div className=\"uppy-Dashboard-Item-statusSize\">\r\n    {prettierBytes(props.file.size)}\r\n  </div>\r\n)\r\n\r\nconst ReSelectButton = (props) => props.file.isGhost && (\r\n  <span>\r\n    {' \\u2022 '}\r\n    <button\r\n      className=\"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect\"\r\n      type=\"button\"\r\n      onClick={props.toggleAddFilesPanel}\r\n    >\r\n      {props.i18n('reSelect')}\r\n    </button>\r\n  </span>\r\n)\r\n\r\nconst ErrorButton = ({ file, onClick }) => {\r\n  if (file.error) {\r\n    return (\r\n      <button\r\n        className=\"uppy-u-reset uppy-Dashboard-Item-errorDetails\"\r\n        aria-label={file.error}\r\n        data-microtip-position=\"bottom\"\r\n        data-microtip-size=\"medium\"\r\n        onClick={onClick}\r\n        type=\"button\"\r\n      >\r\n        ?\r\n      </button>\r\n    )\r\n  }\r\n  return null\r\n}\r\n\r\nmodule.exports = function FileInfo (props) {\r\n  const { file } = props\r\n  return (\r\n    <div\r\n      className=\"uppy-Dashboard-Item-fileInfo\"\r\n      data-uppy-file-source={file.source}\r\n    >\r\n      <div className=\"uppy-Dashboard-Item-fileName\">\r\n        {renderFileName(props)}\r\n        <ErrorButton\r\n          file={props.file}\r\n          // eslint-disable-next-line no-alert\r\n          onClick={() => alert(props.file.error)} // TODO: move to a custom alert implementation\r\n        />\r\n      </div>\r\n      <div className=\"uppy-Dashboard-Item-status\">\r\n        {renderAuthor(props)}\r\n        {renderFileSize(props)}\r\n        {ReSelectButton(props)}\r\n      </div>\r\n      <MetaErrorMessage\r\n        file={props.file}\r\n        i18n={props.i18n}\r\n        toggleFileCard={props.toggleFileCard}\r\n        metaFields={props.metaFields}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n"]}