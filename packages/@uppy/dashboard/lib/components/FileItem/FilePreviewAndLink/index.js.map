{"version":3,"names":["h","FilePreview","MetaErrorMessage","getFileTypeIcon","getYouTubeID","require","matchYoutubeUrl","url","p","match","FilePreviewAndLink","props","_props$file","file","i18n","toggleFileCard","metaFields","showLinkToFileUploadResult","white","previewBackgroundColor","preview","type","color","thumbnail","remote","body","videoID","fuzzy","className","style","backgroundColor","uploadURL","href","rel","target","meta","name","hidden"],"sources":["index.jsx"],"sourcesContent":["import { h } from 'preact'\nimport FilePreview from '../../FilePreview.jsx'\nimport MetaErrorMessage from '../MetaErrorMessage.jsx'\nimport getFileTypeIcon from '../../../utils/getFileTypeIcon.jsx'\nconst getYouTubeID = require('get-youtube-id');\n\nfunction matchYoutubeUrl(url) {\n  var p = /^(?:https?:\\/\\/)?(?:m\\.|www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))((\\w|-){11})(?:\\S+)?$/;\n  if (url.match(p)) {\n    return url.match(p)[1];\n  }\n  return false;\n}\n\nexport default function FilePreviewAndLink (props) {\n  const { file, i18n, toggleFileCard, metaFields, showLinkToFileUploadResult } = props\n  const white = 'rgba(255, 255, 255, 0.5)'\n  const previewBackgroundColor = file.preview ? white : getFileTypeIcon(props.file.type).color\n  let thumbnail = false\n  const url = props?.file?.remote?.body?.url\n  if (url && matchYoutubeUrl(url)) {\n    const videoID = getYouTubeID(url, { fuzzy: false });\n    thumbnail = `https://img.youtube.com/vi/${videoID}/default.jpg`\n  }\n\n  return (\n    <div\n      className=\"uppy-Dashboard-Item-previewInnerWrap\"\n      style={{ backgroundColor: previewBackgroundColor }}\n    >\n      {\n        showLinkToFileUploadResult && file.uploadURL\n          && (\n          <a\n            className=\"uppy-Dashboard-Item-previewLink\"\n            href={file.uploadURL}\n            rel=\"noreferrer noopener\"\n            target=\"_blank\"\n            aria-label={file.meta.name}\n          >\n            <span hidden>{file.meta.name}</span>\n          </a>\n          )\n      }\n      {\n        !thumbnail &&\n        <FilePreview file={file} />\n      }\n      <MetaErrorMessage\n        file={file}\n        i18n={i18n}\n        toggleFileCard={toggleFileCard}\n        metaFields={metaFields}\n      />\n    </div>\n  )\n}"],"mappings":"AAAA,SAASA,CAAC,QAAQ,QAAQ;AAC1B,OAAOC,WAAW,MAAM,sBAAuB;AAC/C,OAAOC,gBAAgB,MAAM,wBAAyB;AACtD,OAAOC,eAAe,MAAM,mCAAoC;AAChE,MAAMC,YAAY,GAAGC,OAAO,CAAC,gBAAgB,CAAC;AAE9C,SAASC,eAAeA,CAACC,GAAG,EAAE;EAC5B,IAAIC,CAAC,GAAG,0HAA0H;EAClI,IAAID,GAAG,CAACE,KAAK,CAACD,CAAC,CAAC,EAAE;IAChB,OAAOD,GAAG,CAACE,KAAK,CAACD,CAAC,CAAC,CAAC,CAAC,CAAC;EACxB;EACA,OAAO,KAAK;AACd;AAEA,eAAe,SAASE,kBAAkBA,CAAEC,KAAK,EAAE;EAAA,IAAAC,WAAA;EACjD,MAAM;IAAEC,IAAI;IAAEC,IAAI;IAAEC,cAAc;IAAEC,UAAU;IAAEC;EAA2B,CAAC,GAAGN,KAAK;EACpF,MAAMO,KAAK,GAAG,0BAA0B;EACxC,MAAMC,sBAAsB,GAAGN,IAAI,CAACO,OAAO,GAAGF,KAAK,GAAGf,eAAe,CAACQ,KAAK,CAACE,IAAI,CAACQ,IAAI,CAAC,CAACC,KAAK;EAC5F,IAAIC,SAAS,GAAG,KAAK;EACrB,MAAMhB,GAAG,GAAGI,KAAK,aAAAC,WAAA,GAALD,KAAK,CAAEE,IAAI,cAAAD,WAAA,GAAXA,WAAA,CAAaY,MAAM,cAAAZ,WAAA,GAAnBA,WAAA,CAAqBa,IAAI,qBAAzBb,WAAA,CAA2BL,GAAG;EAC1C,IAAIA,GAAG,IAAID,eAAe,CAACC,GAAG,CAAC,EAAE;IAC/B,MAAMmB,OAAO,GAAGtB,YAAY,CAACG,GAAG,EAAE;MAAEoB,KAAK,EAAE;IAAM,CAAC,CAAC;IACnDJ,SAAS,GAAI,8BAA6BG,OAAQ,cAAa;EACjE;EAEA,OACE1B,CAAA;IACE4B,SAAS,EAAC,sCAAsC;IAChDC,KAAK,EAAE;MAAEC,eAAe,EAAEX;IAAuB;EAAE,GAGjDF,0BAA0B,IAAIJ,IAAI,CAACkB,SAAS,IAE1C/B,CAAA;IACE4B,SAAS,EAAC,iCAAiC;IAC3CI,IAAI,EAAEnB,IAAI,CAACkB,SAAU;IACrBE,GAAG,EAAC,qBAAqB;IACzBC,MAAM,EAAC,QAAQ;IACf,cAAYrB,IAAI,CAACsB,IAAI,CAACC;EAAK,GAE3BpC,CAAA;IAAMqC,MAAM;EAAA,GAAExB,IAAI,CAACsB,IAAI,CAACC,IAAW,CAClC,CACF,EAGH,CAACb,SAAS,IACVvB,CAAA,CAACC,WAAW;IAACY,IAAI,EAAEA;EAAK,CAAE,CAAC,EAE7Bb,CAAA,CAACE,gBAAgB;IACfW,IAAI,EAAEA,IAAK;IACXC,IAAI,EAAEA,IAAK;IACXC,cAAc,EAAEA,cAAe;IAC/BC,UAAU,EAAEA;EAAW,CACxB,CACE,CAAC;AAEV"}