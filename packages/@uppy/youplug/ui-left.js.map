{"version":3,"sources":["ui-left.js"],"names":["h","Component","require","useState","module","exports","UILeftPane","constructor","props","i18n","uppy","logout","retriever","prevToken","nextToken","formSend","bind","event","preventDefault","Urls","YOUTUBE_BASEURL","selectedItems","document","querySelectorAll","map","selectedVid","push","getAttribute","item","getPlugin","addFile","render","onSubmit","className","type","value","ThumbsList","videos","getState","gallery","lngs","idx","dateText","date","cpts","forEach","el","ix","lang","vdId","name","src","tmbm","width","height","titl","cleanClasses","pW","querySelector","classList","contains","remove","doPagingUI","token","setState","style","onClick","e","viewBox","xmlns","d","fill"],"mappings":"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","sourcesContent":["const { h, Component } = require('preact');\nconst { useState } = require('preact/hooks');\n\nmodule.exports = class UILeftPane extends Component {\n  constructor(props) {\n    super(props);\n\n    this.i18n = props.i18n;\n    this.uppy = props.uppy;\n    this.logout = props.logout;\n    this.retriever = props.retriever;\n    this.prevToken = props.prevToken;\n    this.nextToken = props.nextToken;\n    this.formSend = this.formSend.bind(this);\n  }\n\n  formSend(event) {\n    event.preventDefault();\n    let Urls = [];\n    const YOUTUBE_BASEURL = 'https://www.youtube.com/watch?v=';\n    const selectedItems = [...document.querySelectorAll('input[type=checkbox]:checked')].map(selectedVid => Urls.push(YOUTUBE_BASEURL + selectedVid.getAttribute('value')));\n    Urls.map(item => this.uppy.getPlugin('Url').addFile(item));    // .then(this.uppy.upload);\n    //        this.uppy.getPlugin('Url').addFile('https://example.com/myfile.pdf').then(this.uppy.upload);\n  }\n\n  render() {\n    return h(\"form\", { onSubmit: this.formSend, className: 'uppy-Youplug-listForm' }, [\n      h(\"input\", {\n        type: \"submit\",\n        value: \"Next\",\n        className: \"uppy-DashboardContent-back uppy-Youplug-next-button\"\n      }),\n      h(ThumbsList, {\n        uppy: this.uppy,\n        prevToken: this.prevToken,\n        nextToken: this.nextToken,\n        retriever: this.retriever,\n        videos: this.uppy.getState().videos\n      })\n    ]);\n  }\n\n};\n\nconst ThumbsList = props => {\n  let gallery;\n  let lngs = [];\n\n  if (props.videos) {\n    gallery = props.videos.map((item, idx) => {\n      // const dateText = moment(item.date).format('MMMM Do YYYY')\n      const dateText = item.date\n\n      if (item.cpts) {\n        item.cpts.forEach(function (el, ix) {\n          lngs[ix] = el.lang;\n        });\n      }\n\n      return (\n        h(\"li\", { className: \"uppy-Youplug-listItem\" }, [\n          h(\"input\", {\n            type: \"checkbox\",\n            value: item.vdId,\n            name: \"selectedVideos\",\n            className: 'uppy-Youplug-listItem-checkbox'\n          }),\n          h(\"img\", { src: item.tmbm, width: \"50\", height: \"40\" }),\n          h(\"div\", { className: 'uppy-Youplug-listItem-textContainer' },\n            h(\"span\", { className: 'uppy-Dashboard-Item-name' }, item.titl),\n            h(\"span\", { className: 'uppy-Dashboard-Item-status uppy-Dashboard-Item-statusSize' }, dateText),\n          )\n        ])\n      );\n    });\n  }\n\n  const cleanClasses = () => {\n    var pW = document.querySelector('.pagination-wrapper');\n    if(pW.classList.contains('transition-next')) pW.classList.remove('transition-next');\n    if(pW.classList.contains('transition-prev')) pW.classList.remove('transition-prev');\n  }\n\n  const doPagingUI = (event, token) => {\n    if(token){\n      var pW = document.querySelector('.pagination-wrapper');\n//    pW.classList.add('transition-'+(this.classList.contains('btn--prev') ? 'prev' : 'next'));\n//    var tOut = setTimeout(this.cleanClasses, 500);\n      props.uppy.setState({ 'activeToken': token, 'videos': null, 'prevToken': null, 'nextToken': null });    \n      props.retriever();\n    }\n  }\n\n  return ((props.uppy.getState().prevToken === '' && props.uppy.getState().nextToken === '') ?\n    h('ul', { className: \"uppy-Youplug-listContainer\"}, gallery) :\n    h('ul', { className: \"uppy-Youplug-listContainer\"}, [\n      gallery,\n      h('div', { className: \"uppy-Dashboard-paging\" }, [\n//        h('div', { className: \"pagination-wrapper\"}, [\n\n          h('div', {className: \"pagination-controller\", style:\"width:78px;\", onClick: e => doPagingUI(e, props.uppy.getState().prevToken)}, [\n            h('svg', { \n              className: \"btn btn--prev\", \n              width: \"64\",\n              height: \"64\",\n              viewBox: \"0 0 24 24\",\n              xmlns: \"http://www.w3.org/2000/svg\"\n            }, [\n              h('path', { d: \"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z\"}),\n              h('path', { d: \"M0-.5h24v24H0z\", fill: \"none\"}),\n            ])\n          ]),\n/*\n          h('div', { className: \"pagination-container\"}, [\n            h('div', { className: \"little-dot  little-dot--first\"}),\n            h('div', { className: \"little-dot\"}, [\n              h('div', { className: \"big-dot-container\"}, [\n                h('div', { className: \"big-dot\"})\n              ]),\n            ]),\n          ]),\n*/\n          h('div', {className: \"pagination-controller\", style:\"width:78px;\", onClick: e => doPagingUI(e, props.uppy.getState().nextToken)}, [\n            h('svg', { \n              className: \"btn btn--next\", \n              width: \"64\",\n              height: \"64\",\n              viewBox: \"0 0 24 24\",\n              xmlns: \"http://www.w3.org/2000/svg\"\n            }, [\n              h('path', {d: \"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z\"}),\n              h('path', {d: \"M0-.25h24v24H0z\", fill: \"none\"})\n            ])\n          ])\n\n//        ])\n      ])\n    ]));\n  }"]}