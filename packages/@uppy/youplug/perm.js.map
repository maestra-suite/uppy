{"version":3,"sources":["perm.js"],"names":["h","Component","require","module","exports","YouplugPerm","constructor","props","i18n","cid","onSignIn","handleCredentialResponse","bind","componentDidMount","script","document","createElement","defer","async","src","body","appendChild","google","accounts","id","initialize","client_id","auto_select","callback","prompt","notification","isNotDisplayed","console","log","getNotDisplayedReason","isSkippedMoment","getSkippedReason","isDismissedMoment","getDismissedReason","renderButton","getElementById","theme","size","response","render","className","width","height","viewBox","xmlns","d","fill"],"mappings":"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","sourcesContent":["const { h, Component } = require('preact');\n\nmodule.exports = class YouplugPerm extends Component {\n  constructor(props) {\n    super(props);\n    // console.log('UI:construct');\n    this.i18n = props.i18n;\n    this.cid = props.cid;\n    this.onSignIn = props.onSignIn;\n    this.handleCredentialResponse = this.handleCredentialResponse.bind(this);\n  }\n\n  componentDidMount() {\n    const script = document.createElement('script');\n    script.defer = true;\n    script.async = true;\n    script.src = \"https://accounts.google.com/gsi/client\";\n    document.body.appendChild(script);\n\n    google.accounts.id.initialize({\n      client_id: this.cid,\n      auto_select: true,\n      callback: this.handleCredentialResponse\n    });\n    google.accounts.id.prompt(notification => {\n      if (notification.isNotDisplayed()) {\n        console.log(notification.getNotDisplayedReason())\n      } else if (notification.isSkippedMoment()) {\n        console.log(notification.getSkippedReason())\n      } else if (notification.isDismissedMoment()) {\n        console.log(notification.getDismissedReason())\n      }\n    });\n    google.accounts.id.renderButton(\n      document.getElementById(\"buttonDiv\"),\n      { theme: \"outline\", size: \"large\" }  // Customization attributes\n    );\n    google.accounts.id.prompt();\n  }\n\n  handleCredentialResponse(response) {\n    this.onSignIn(response);\n    //    const decodedToken = jwt_decode(response.credential);\n    //    console.log({...decodedToken});\n  }\n\n  render() {\n    return h(\"div\", { className: \"uppy-Youplug-loginMenuContainer\" },\n      h(\"div\", { className: \"uppy-Provider-authIcon Youplug\" },\n        h(\"svg\", {\n          width: \"300\",\n          height: \"300\",\n          viewBox: \"0 0 300 300\",\n          xmlns: \"http://www.w3.org/2000/svg\",\n        },\n          h(\"path\", {\n            d: \"M 149.9375 79.222656 C 149.9375 79.222656 86.718651 79.222715 70.851562 83.345703 C 62.355775 85.719505 55.360154 92.715203 52.986328 101.33594 C 48.863375 117.20304 48.863281 150.0625 48.863281 150.0625 C 48.863281 150.0625 48.863375 183.0467 52.986328 198.66406 C 55.360154 207.28468 62.230834 214.15544 70.851562 216.5293 C 86.843592 220.77718 149.9375 220.77734 149.9375 220.77734 C 149.9375 220.77734 213.28168 220.77729 229.14844 216.6543 C 237.76923 214.28049 244.63977 207.53464 246.88867 198.78906 C 251.1366 183.04674 251.13672 150.1875 251.13672 150.1875 C 251.13672 150.1875 251.26156 117.20304 246.88867 101.33594 C 244.63977 92.715203 237.76923 85.844606 229.14844 83.595703 C 213.28168 79.222856 149.9375 79.222656 149.9375 79.222656 z M 129.82227 119.70312 L 182.42188 150.0625 L 129.82227 180.29688 L 129.82227 119.70312 z\",\n            fill: \"white\"\n          }),\n        )\n      ),\n      h(\"div\", { className: \"uppy-Provider-authTitle\" },\n        \"Authenticate with your YouTube\", h(\"br\", null), \"account to select files.\"\n      ),\n      h(\"div\", { id: \"buttonDiv\", className: \"uppy-Youplug-loginButton\" })\n    );\n  }\n};\n"]}